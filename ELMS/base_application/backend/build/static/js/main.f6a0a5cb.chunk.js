(this["webpackJsonpelms-base-app"]=this["webpackJsonpelms-base-app"]||[]).push([[0],{31:function(e,t,a){e.exports=a(59)},59:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(29),c=a.n(i),s=a(13),r=a(6),m=(a(36),a(2)),o=a(3),u=a(5),h=a(4),v=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("nav",{className:"navbar navbar-custom navbar-expand"},l.a.createElement(s.b,{to:"/",className:"navbar-brand"},"Home"),l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"navbar-item"},l.a.createElement(s.b,{to:"/VehicleStatus",className:"nav-link"},"Vehicle Status")),l.a.createElement("li",{className:"navbar-item"},l.a.createElement(s.b,{to:"/LastCommunications",className:"nav-link"},"Last Communications")),l.a.createElement("li",{className:"navbar-item"},l.a.createElement(s.b,{to:"/Analytics",className:"nav-link"},"Analytics")),l.a.createElement("li",{className:"navbar-item"},l.a.createElement(s.b,{to:"/TaPage",className:"nav-link"},"TA Page"))))}}]),a}(n.Component);var p=function(){return l.a.createElement("div",null,l.a.createElement("footer",{id:"footer"},"Equipment Location Monitoring System - Base Unit"))};var b=function(){return l.a.createElement("div",{className:"vehicle_status_rows"})},d=a(1),g=function(e){return l.a.createElement("div",{className:"vehicle_status_column"},l.a.createElement("div",{className:"vehicle_card"},l.a.createElement("div",{className:"latitude"},l.a.createElement("p",null,"Latitude"),Number(e.vehicle.new_latitude).toFixed(4)),l.a.createElement("div",{className:"unit"},l.a.createElement("p",null,"Unit"),e.vehicle.vehicle_unit),l.a.createElement("div",{className:"longitude"},l.a.createElement("p",null,"Longitude"),Number(e.vehicle.new_longitude).toFixed(4)),l.a.createElement("div",{className:e.typeClass},e.typeText,e.getActiveTime(e.vehicle)),e.isAtRisk&&l.a.createElement("div",{className:e.riskClass},e.riskText,e.getAtRiskTime(e.vehicle)),l.a.createElement("div",{className:"nearest_vehicle"},"Nearest vehicle:",e.getNearestVehicle(e.vehicle))))},f=a(12),E=a.n(f);function N(e){var t=Math.abs(new Date(e)-new Date(Date.now())),a=(parseInt(t%1e3/100),Math.floor(t/1e3%60)),n=Math.floor(t/6e4%60),l=Math.floor(t/36e5%24);return(l=l<10?"0"+l:l)+":"+(n=n<10?"0"+n:n)+":"+(a=a<10?"0"+a:a)}var O=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getData=function(){E.a.get(n.vehicleQuery).then((function(e){n.setState({vehicles:e.data}),console.log(e.data),n.intervalID=setTimeout(n.getData.bind(Object(d.a)(n)),5e3)})).catch((function(e){console.log(e)}))},n.getNearestVehicle=n.getNearestVehicle.bind(Object(d.a)(n)),n.getActiveTime=n.getActiveTime.bind(Object(d.a)(n)),n.getAtRiskTime=n.getAtRiskTime.bind(Object(d.a)(n)),n.getInactiveTime=n.getInactiveTime.bind(Object(d.a)(n)),n.state={vehicles:[],nearest_vehicle:0},n.vehicleQuery="https://elms-base-application.uc.r.appspot.com/vehicles",n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getData(),this.interval=setInterval((function(){return e.setState({time:Date.now()}),1e3}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),clearTimeout(this.timeout)}},{key:"getActiveTime",value:function(e){return N(e.startup_time)}},{key:"getInactiveTime",value:function(e){return N(e.last_received_time)}},{key:"getAtRiskTime",value:function(e){return N(e.last_received_time)}},{key:"getNearestVehicle",value:function(e){for(var t=0,a=1e4,n=e.distance_to_vehicles.length,l=0;l<n;l++)e.distance_to_vehicles[l].distance<a&&(a=e.distance_to_vehicles[l].distance,t=e.distance_to_vehicles[l].vehicle_unit);return t}}]),a}(n.Component),_=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getAtRiskVehicles=n.getAtRiskVehicles.bind(Object(d.a)(n)),n.getNearestVehicle=n.getNearestVehicle.bind(Object(d.a)(n)),n.getActiveTime=n.getActiveTime.bind(Object(d.a)(n)),n.getAtRiskTime=n.getAtRiskTime.bind(Object(d.a)(n)),n.state={vehicles:[]},n.vehicleQuery="https://elms-base-application.uc.r.appspot.com/vehicles/at_risk",n}return Object(o.a)(a,[{key:"getAtRiskVehicles",value:function(){var e=this;return this.state.vehicles.map((function(t){return l.a.createElement(g,{vehicle:t,getNearestVehicle:e.getNearestVehicle,typeClass:"active_time",typeText:"Active time: ",riskClass:"at_risk_time",isAtRisk:!0,riskText:"At risk time: ",getActiveTime:e.getActiveTime,getAtRiskTime:e.getAtRiskTime,key:t._id})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"at_risk"},l.a.createElement("hr",{className:"at_risk_line"}),l.a.createElement("p",{className:"at_risk_text"},"At Risk"),l.a.createElement("hr",{className:"at_risk_line"}),this.getAtRiskVehicles())}}]),a}(O),j=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getActiveVehicles=n.getActiveVehicles.bind(Object(d.a)(n)),n.getNearestVehicle=n.getNearestVehicle.bind(Object(d.a)(n)),n.getActiveTime=n.getActiveTime.bind(Object(d.a)(n)),n.state={vehicles:[]},n.vehicleQuery="https://elms-base-application.uc.r.appspot.com/vehicles/active",n}return Object(o.a)(a,[{key:"getActiveVehicles",value:function(){var e=this;return this.state.vehicles.map((function(t){return l.a.createElement(g,{vehicle:t,getNearestVehicle:e.getNearestVehicle,isAtRisk:!1,getActiveTime:e.getActiveTime,key:t._id,typeClass:"active_time",typeText:"Active time: "})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"active"},l.a.createElement("hr",{className:"active_line"}),l.a.createElement("p",{className:"active_text"},"Active"),l.a.createElement("hr",{className:"active_line"}),this.getActiveVehicles())}}]),a}(O),y=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getInactiveVehicles=n.getInactiveVehicles.bind(Object(d.a)(n)),n.getNearestVehicle=n.getNearestVehicle.bind(Object(d.a)(n)),n.getInactiveTime=n.getInactiveTime.bind(Object(d.a)(n)),n.state={vehicles:[]},n.vehicleQuery="https://elms-base-application.uc.r.appspot.com/vehicles/inactive",n}return Object(o.a)(a,[{key:"getInactiveVehicles",value:function(){var e=this;return this.state.vehicles.map((function(t){return l.a.createElement(g,{vehicle:t,getNearestVehicle:e.getNearestVehicle,getActiveTime:e.getInactiveTime,key:t._id,isatRisk:!1,typeClass:"active_time",typeText:"Inactive time: "})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"inactive"},l.a.createElement("hr",{className:"inactive_line"}),l.a.createElement("p",{className:"inactive_text"},"Inactive"),l.a.createElement("hr",{className:"inactive_line"}),this.getInactiveVehicles())}}]),a}(O);var k=function(){return l.a.createElement("div",{className:"vehicle_status_tiles"},l.a.createElement(_,null),l.a.createElement(b,null),l.a.createElement(j,null),l.a.createElement(b,null),l.a.createElement(y,null),l.a.createElement(b,null))},A=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"page-container"},l.a.createElement(v,null),l.a.createElement("main",null,"Vehicle Status"),l.a.createElement(k,null),l.a.createElement(p,null))}}]),a}(n.Component),C=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onSubmitUsername=n.onSubmitUsername.bind(Object(d.a)(n)),n.onSubmitPassword=n.onSubmitPassword.bind(Object(d.a)(n)),n.validateLogin=n.validateLogin.bind(Object(d.a)(n)),n.state={users:[],username:"",password:""},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.get("https://elms-base-application.uc.r.appspot.com/users").then((function(t){e.setState({users:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"onSubmitUsername",value:function(e){this.setState({username:e.target.value})}},{key:"onSubmitPassword",value:function(e){this.setState({password:e.target.value})}},{key:"validateLogin",value:function(e){e.preventDefault();var t={username:this.state.username,password:this.state.password};console.log(t),E.a.post("https://elms-base-application.uc.r.appspot.com/users/auth",t).then((function(e){console.log(e.data),window.location.href="/VehicleStatus"})).catch((function(e){console.log(e),alert("Invalid login attempt!")}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"login_parent"},l.a.createElement("div",{className:"login_box"},l.a.createElement("h2",{className:"login"},"Base Login"),l.a.createElement("form",{id:"login_form",className:"login_form",onSubmit:this.validateLogin},l.a.createElement("label",{className:"user_name"},"User Name: "),l.a.createElement("input",{id:"user_name",type:"text",name:"User Name",placeholder:"User Name",onChange:this.onSubmitUsername}),l.a.createElement("label",{className:"password"},"Password: "),l.a.createElement("input",{id:"password",type:"password",name:"Password",placeholder:"************",onChange:this.onSubmitPassword}),l.a.createElement("input",{type:"submit",value:"Login",id:"Submit",className:"Submit"})),l.a.createElement("div",{className:"bottom_container"},l.a.createElement(s.b,{className:"create_user",to:"/AddUser"},"Create profile"))))}}]),a}(n.Component),V=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getOfflineVehicles=n.getOfflineVehicles.bind(Object(d.a)(n)),n.getNearestVehicle=n.getNearestVehicle.bind(Object(d.a)(n)),n.getActiveTime=n.getActiveTime.bind(Object(d.a)(n)),n.state={vehicles:[],nearest_vehicle:0},n.vehicleQuery="https://elms-base-application.uc.r.appspot.com/vehicles/offline",n}return Object(o.a)(a,[{key:"getOfflineVehicles",value:function(){var e=this;if(this.state.vehicles.length>0)return this.state.vehicles.map((function(t){return l.a.createElement(g,{vehicle:t,getNearestVehicle:e.getNearestVehicle,getActiveTime:e.getActiveTime,key:t._id,typeClass:"active_time",typeText:"Offline time: "})}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"vehicle_status_tiles"},l.a.createElement("div",{className:"offline_vehicles"},l.a.createElement("hr",{className:"offline_vehicles_line"}),l.a.createElement("p",{className:"offline_vehicles_text"},"Offline"),l.a.createElement("hr",{className:"offline_vehicles_line"}),this.getOfflineVehicles()),l.a.createElement(b,null))}}]),a}(O),T=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"page-container"},l.a.createElement(v,null),l.a.createElement("main",null,"Last Communications"),l.a.createElement(V,null),l.a.createElement(p,null))}}]),a}(n.Component),w=function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.table.vehicle_unit),l.a.createElement("td",null,e.table.pastVelocityAvg),l.a.createElement("td",null,e.table.max_speed),l.a.createElement("td",null,e.table.startup_time))},S=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={table:[]},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.get("https://elms-base-application.uc.r.appspot.com/vehicles/analytics").then((function(t){e.setState({table:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"renderTableData",value:function(){var e=this;return console.log(this.state.table.max_speed),this.state.table.map((function(t){return l.a.createElement(w,{table:t,getAverageSpeed:e.pastVelocityAvg,max_speed:e.max_speed,startup_time:e.getActiveTime,key:t._id})}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("table",{id:"vehicles"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Vehicle #"),l.a.createElement("th",null,"Average Speed"),l.a.createElement("th",null,"Max Speed"),l.a.createElement("th",null,"Startup date"))),l.a.createElement("tbody",null,this.renderTableData())),l.a.createElement(b,null))}}]),a}(n.Component),x=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(v,null),l.a.createElement("main",null,"Analytics"),l.a.createElement(S,null),l.a.createElement(p,null))}}]),a}(n.Component),R=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onChangeUserName=n.onChangeUserName.bind(Object(d.a)(n)),n.onChangeEmail=n.onChangeEmail.bind(Object(d.a)(n)),n.onChangePassword=n.onChangePassword.bind(Object(d.a)(n)),n.onChangeFirstName=n.onChangeFirstName.bind(Object(d.a)(n)),n.onChangeLastName=n.onChangeLastName.bind(Object(d.a)(n)),n.onSubmit=n.onSubmit.bind(Object(d.a)(n)),n.state={username:"",email:"",password:"",first_name:"",last_name:""},n}return Object(o.a)(a,[{key:"onChangeUserName",value:function(e){this.setState({username:e.target.value})}},{key:"onChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onChangeFirstName",value:function(e){this.setState({first_name:e.target.value})}},{key:"onChangeLastName",value:function(e){this.setState({last_name:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,email:this.state.email,password:this.state.password,first_name:this.state.first_name,last_name:this.state.last_name};E.a.post("https://elms-base-application.uc.r.appspot.com/users/add",t).then((function(e){return console.log(e.data)})),this.setState({username:"",email:"",password:"",first_name:"",last_name:""}),window.location.href="/"}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(v,null),l.a.createElement("h3",null,"Create User"),l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Username: "),l.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.username,onChange:this.onChangeUserName})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Password: "),l.a.createElement("input",{type:"password",required:!0,className:"form-control",value:this.state.password,onChange:this.onChangePassword})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Email: "),l.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.email,onChange:this.onChangeEmail})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"First Name: "),l.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.first_name,onChange:this.onChangeFirstName})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Last Name: "),l.a.createElement("input",{type:"text",required:!0,className:"form-control",value:this.state.last_name,onChange:this.onChangeLastName})),l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"submit",value:"Create User",className:"btn btn-primary"}))),l.a.createElement(p,null))}}]),a}(n.Component),U=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).removeVehicles=n.removeVehicles.bind(Object(d.a)(n)),n}return Object(o.a)(a,[{key:"removeVehicles",value:function(){E.a.delete("https://elms-base-application.uc.r.appspot.com/vehicles/deleteall").then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"deleteVehicle"},l.a.createElement("div",null,l.a.createElement("h3",{className:"deleteText"},"Delete All Vehicles"),l.a.createElement("p",{className:"taReminder"},"*Remember to delete vehicles.txt from C:\\logs\\saved_vehicles")),l.a.createElement("div",{className:"deleteButton"},l.a.createElement("button",{type:"submit",onClick:this.removeVehicles,className:"btn btn-danger"},"Delete All")))}}]),a}(n.Component),I=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(v,null),l.a.createElement("main",null,"TA Testing Page"),l.a.createElement(U,null),l.a.createElement(p,null))}}]),a}(n.Component);var L=function(){return l.a.createElement(s.a,null,l.a.createElement(r.a,{path:"/",exact:!0,component:C}),l.a.createElement(r.a,{path:"/VehicleStatus",component:A}),l.a.createElement(r.a,{path:"/LastCommunications",component:T}),l.a.createElement(r.a,{path:"/Analytics",component:x}),l.a.createElement(r.a,{path:"/AddUser",component:R}),l.a.createElement(r.a,{path:"/TaPage",component:I}))};c.a.render(l.a.createElement(L,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.f6a0a5cb.chunk.js.map